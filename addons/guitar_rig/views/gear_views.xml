<odoo>
<record id="view_list_gear" model="ir.ui.view">
        <field name="name">guitar_rig.gear.list</field>
        <field name="model">guitar_rig.gear</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="manufacturer_label"/>
                <field name="gear_type"/>
                <field name="manufacturer_country_label"/>
                <field name="session_count" avg="Moyenne Sessions"/>            
            </list>
        </field>
    </record>

    <record id="view_form_gear" model="ir.ui.view">
  <field name="name">Guitar Gear Form</field>
  <field name="model">guitar_rig.gear</field>
  <field name="arch" type="xml">
    <form string="Gear">
      <sheet>
        <group>
          <group>
            <field name="image" widget="image" options='{"size":[150,140]}'/>
          </group>
          <group>
            <field name="name"/>
            <field name="gear_type"/>
            <field name="purchase_date"/>
            <field name="price"/>
            <button name="action_verify_price" 
                string="Vérifier le prix" 
                type="object" 
                class="oe_highlight" 
                icon="fa-check-circle"/>

            <field name="manufacturer_id"/>
            <field name="manufacturer_country_id"/>
            <field name="session_count" readonly="1"/>
          </group>
        </group>

        <notebook>

          <page string="Sessions">
            <field name="session_ids">
              <list>
                <field name="name"/>
                <field name="start_datetime"/>
                <field name="duration"/>
              </list>
            </field>
          </page>

          <page string="Notes internes" groups="guitar_rig.guitar_group_admin">
            <!-- visible seulement pour le groupe admin -->
            <field name="internal_notes"/>
          </page>
        </notebook>
      </sheet>
    </form>
  </field>
</record>



    <record id="view_kanban_gear" model="ir.ui.view">
    <field name="name">Guitar Gear Kanban</field>
    <field name="model">guitar_rig.gear</field>
    <field name="arch" type="xml">
        <kanban>
            <templates>
                <t t-name="kanban-box">
                    <div class="oe_kanban_global_click">
                        
                        <div class="o_kanban_image">
                            <field name="image" widget="image" options="{'size': [64, 64]}"/>
                        </div>

                        <div class="oe_kanban_details">
                            
                            <strong class="o_kanban_record_title">
                                <field name="name"/>
                            </strong>

                            <div class="text-muted">
                                <field name="manufacturer_label"/>
                                <span t-if="record.manufacturer_country_id">
                                    (<field name="manufacturer_country_label"/>)
                                </span>
                            </div>

                            <div class="mt-1">
                                <span class="badge rounded-pill text-bg-info">
                                    <field name="gear_type"/>
                                </span>
                            </div>

                            <div class="o_kanban_record_bottom mt-2">
                                <div class="oe_kanban_bottom_left">
                                    <field name="price" widget="monetary" options="{'currency_field': 'currency_id'}" decoration-bf="1"/>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <span title="Nombre de sessions">
                                        <i class="fa fa-music"/> <field name="session_count"/>
                                    </span>
                                </div>
                            </div>

                        </div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
</record>

    <record id="view_search_gear" model="ir.ui.view">
    <field name="name">Tous les équipements</field>
    <field name="model">guitar_rig.gear</field>
    <field name="arch" type="xml">
        <search string="Gear">
            <field name="name"/>
            <field name="gear_type"/>
            <field name="manufacturer_id"/>

            <filter name="price_under_1000"
              string="Prix &lt; 1000"
              domain="[('price', '&lt;', 1000)]"/>

            <separator/>
            <filter string="Guitares" name="filter_guitar" domain="[('gear_type', '=', 'guitar')]"/>
            <filter string="Pédales" name="filter_pedal" domain="[('gear_type', '=', 'pedal')]"/>
            <filter string="Amplis" name="filter_amp" domain="[('gear_type', '=', 'amp')]"/>

            <separator/>
            <filter string="Acheté cette année" name="filter_new"
              domain="[('purchase_date', '&gt;=', context_today().strftime('%Y-01-01'))]"/>

            <group expand="0" string="Regrouper par">
          <filter string="Type" name="group_by_type" context="{'group_by': 'gear_type'}"/>
          <filter string="Marque" name="group_by_manufacturer" context="{'group_by': 'manufacturer_id'}"/>
            </group>
        </search>
    </field>
    </record>

</odoo>
